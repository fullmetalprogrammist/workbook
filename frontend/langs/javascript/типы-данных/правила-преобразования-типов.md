# Правила преобразования типов

## Явное преобразование

- Делается тремя функциями
  - [String(значение)](#string)
    - Аргумент просто становится строкой как есть
  - [Number(значение)](#number)
    - Пытается преобразовать аргумент в число
      - Если преобразование не получается, то результатом становится NaN
    - Тонкости
      - Пробельные символы *по краям* строк удаляются, а все что после этого осталось, уже преобразуется в число
      - Пустая строка трактуется как 0
  - [Boolean(значение)](#boolean)
    - Преобразует аргумент в true или false
      - Любые значения, которые преобразуются в true, называются **truthy** (трули)
      - А которые преобразуются в false, называются **falsy** (фолси)
    - Все, что как бы "интуитивно" пустое (пустая строка), нулевое (0), непонятное-неопределенное-неизвестное (NaN, null, undefined), является false
    - Например
      - Числа 1 и 0 являются, соответственное, true и false
        - Однако строка "0" является true, потому что она рассматривается именно как строка, а не как число. Она не пустая, поэтому true
          - В других языках может быть по-другому
    - Тонкости
      - При boolean-преобразовании пробельные символы из строки не удаляются, поэтому строка из пробелов считается не пустой, а значит является true

## Автоматическое преобразование в операторах

- Терминология

  * Операнд - это тот, над кем совершают действие
    * `5 + 7` : 5, 7 - операнды, + оператор
  * Оператор - это тот, кто совершает действие
    * Унарный - совершает действие над одним операндом `5++`
    * Бинарный - совершает действие над двумя операндами `5 + 7`

- Принципы преобразования

  - `+`

    - Бинарный плюс

      - строка + строка = конкатенация

        - `"4" + "1";  // "41"`

      - строка + не строка

        - Преобразует "не строку" в строку, потом конкатенация
          - `1 + "7";  // "17"`
        - Порядок операндов не важен, `5 + "3"` или `"3" + 5` - одно и то же, `"35"`

      - не строка + не строка

        - Преобразует не-строку в число и пытается сложить

          ```javascript
          true + 8;   // 9 - number
          false + 8;  // 8 - number
          true + true;  // 2 - number
          ```

      - Резюме для +

        - Есть строка - работает как со строками
        - Нет строки - работает как с числами

    - Унарный плюс

      - Если применить к числу, то число остается без изменений

        - `+(-4)` : -4 осталось числом

      - Если применить к строке, то будет попытка преобразовать ее в число

        ```javascript
        +("45")  // 45 - number
        +"hello" // Nan
        ```

        ```javascript
        let a = "5";
        let b = "7";
        let c = a + b;    // 57
        let e = +a + +b;  // 12
        ```

  - `-`, `/`, `*`

    - Если операнды не числа, то js пытается привести их к числам, потом выполняет операцию

## Примеры

### String

```javascript
String(255);        // "255"
String(false);      // "false"
String(true);       // "true"
String(null);       // "null"
String(undefined);  // "undefined"
String(NaN);        // "NaN"
String(255 / 0);    // "Infinity"
```

### Number

```javascript
Number("   255   ");  // 255
Number(true);         // 1
Number(false);        // 0
Number("   ");        // 0
Number("");           // 0
Number(null);         // 0
Number("2 5 5");      // NaN
Number("   ололо ");  // NaN
Number(undefined);    // NaN
Number(NaN);          // NaN
Number(Infinity);     // Infinity
```

### Boolean

```javascript
Boolean("   255   ");    // true
Boolean("   2 5 5   ");  // true
Boolean("   ололо   ");  // true
Boolean("   ");          // true
Boolean("0");            // true, расц. как непустая строка
Boolean(Infinity);       // true
Boolean(1);              // true
Boolean(0);              // false
Boolean("");             // false
Boolean(null);           // false
Boolean(undefined);      // false
Boolean(NaN);            // false
```

## Упражнения

<details><summary>1 + 1 + "3"</summary>"23"</details>
<details><summary>1 + (1 + "3")</summary>"113"</details>
<details><summary>NaN + "4"</summary>"NaN4"</details>
<details><summary>"" + 1 + 0</summary>"10"</details>
<details><summary>"" - 1 + 0</summary>-1</details>
<details><summary>true + false</summary>1</details>
<details><summary>6 / "3"</summary>2</details>
<details><summary>"2" * "3"</summary>6</details>
<details><summary>4 + 5 + "px"</summary>"9px"</details>
<details><summary>"$" + 4 + 5</summary>"$45"</details>
<details><summary>"4" - 2</summary>2</details>
<details><summary>"4px" - 2</summary>NaN</details>
<details><summary>" -9 " + 5</summary>" -9 5"</details>
<details><summary>" -9 " - 5</summary>-14</details>
<details><summary>" - 9 " - 5</summary>NaN</details>
<details><summary>null + 1</summary>1</details>
<details><summary>undefined + 1</summary>NaN</details>
<details><summary>" \t \n" - 2</summary>-2</details>

