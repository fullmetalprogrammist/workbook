# debounce

- debounce
  - Это паттерн
  - ⚡В чем суть
    - Выполнить действие после наступления указанной задержки между двумя событиями.
    - Особенности
      - События предполагаются одинаковые, например, пользователь вводит текст в поле поиска
        - Событие - изменение поля ввода
      - Реализуется через таймер - каждое событие сбрасывает старый таймер и запускает новый
      - Т.о., каждое событие как бы заново запускает ожидание, а действие выполняется, когда между событиями удалось выдержать заданную паузу
      - Например, пользователь вводит "КОМБИ", а мы хотим вывести ему подсказки с потенциальными товарами, например "КОМБИНЕЗОН", "КОМБИКОРМ". Чтобы не спамить сервер запросами после ввода каждой буквы, делаем дебаунс на 500мс. Т.о., пока пользователь уверенно печатает, мы ждем, а когда он призадумается и сделает паузу в наборе, тогда только функция запроса на сервер сработает.
  - ⚡Техническая реализация
    - Делается через установку и сброс таймера
    - Дебаунс - это функция, которая
      - Принимает
        - Колбэк и задержку
      - Возвращает
        - Функцию-обертку над колбэком
          - В обертке сбрасывается старый таймер и тут же ставится новый
          - В таймере - вызывается колбэк

  - Еще практические примеры использования дебаунса
    - Проверка сложности пароля
      - Пользователь притормозил в наборе - проверяем, достаточно ли сложный пароль в данный момент
    - Автоматическое сохранение в текстовых редакторах
      - Пользователь сделал паузу при наборе текста - автоматически сохраняем текущую копию
    - TODO: заполнять по мере столкновения с интересными сценариями



# Примеры

## Подсказка пользователю, база

```javascript
// html
<input id="userSearch" />


// javascript
const userInput = document.querySelector('#userSearch');

const debouncedSearch = debounce(goSearch, 500);  // <-- Создаем обертку

userInput.addEventListener(
  'input', 
  (event) => debouncedSearch(event.target.value)  // <-- Вешаем ОБЕРТКУ на обработчик
);

function goSearch(value) {  // <-- Функция-работяга
  console.log(`Запрос поиска на сервер: ${value}`)
}

function debounce(fn, delayMs) {  // <-- Дебаунс, функция-декоратор
  let timeoutId;
  return function(...args) {  // <-- Возвращаем обертку над колбэком
    clearTimeout(timeoutId);
    timeoutId = setTimeout(() => fn.apply(this, args), delayMs);  // <-- Вызываем колбэк в таймере
  }
}
```



TODO

- Сделать более сложный пример, где на сервер реально уходит запрос, выбираются подсказки, возвращаются клиенту и отображаются